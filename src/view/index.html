<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1, maximum-scale=1" name="viewport">
    <title>日志查看器</title>
    <link href="__RES__/layui/css/layui.css" rel="stylesheet">
    <style type="text/css">
        #test1 .layui-tree-entry ,
        #test1 .layui-tree-txt,
        #test1 .layui-icon-addition,
        #test1 .layui-icon-subtraction,
        #test1 .layui-icon-delete
        #test1 .layui-icon-file {
            color: #fff;
        }

    </style>
</head>
<body class="layui-layout-body">
<div class="layui-layout layui-layout-admin">
    <div class="layui-header">
        <div class="layui-logo">日志查看器</div>
        <!-- 头部区域（可配合layui已有的水平导航） -->

        <ul class="layui-nav layui-layout-right">

            <li class="layui-nav-item"><a href="">退了</a></li>
        </ul>
    </div>

    <div class="layui-side layui-bg-black">
        <div class="layui-side-scroll">
            <!-- 左侧导航区域（可配合layui已有的垂直导航） -->
            <div class="demo-tree demo-tree-box" id="treelist"></div>
        </div>
    </div>

    <script type="text/html" id="barDemo">
        <a class="layui-btn layui-btn-xs" lay-event="edit">查看日志</a>
    </script>
    <div class="layui-body">
        <!-- 内容主体区域 -->
        <table class="layui-hide" id="file_list_id"></table>
    </div>

    <div class="layui-footer">
        <!-- 底部固定区域 -->
        © layui.com - 底部固定区域
    </div>
</div>
<script src="__RES__/layui/layui.js"></script>
<script>


    //JavaScript代码区域
    layui.use(['tree', 'util','table'], function () {
        var tree = layui.tree,
            layer = layui.layer,
            util = layui.util,
            table = layui.table,
            $ = layui.$;

            var request={
                urls:{
                  tree:'{}'
                },
                //目录数据
                treedata:function (){
                    $.get()

                },
                // 文件列表
                filelist:function (){

                },
                //文件内容
                content:function (){

                },
                //删除文件
                delete:function (){

                }
            };

            // 获取
            getfilelist = function(type,data){
                $.get("{:url('list')}",'')
            };

            //模拟数据1
            data1 = [{
                title: '江西'
                , id: 1
                , children: [{
                    title: '南昌'
                    , id: 1000
                    , children: [{
                        title: '青山湖区'
                        , id: 10001
                    }, {
                        title: '高新区'
                        , id: 10002
                    }]
                }, {
                    title: '九江'
                    , id: 1001
                }, {
                    title: '赣州'
                    , id: 1002
                }]
            }, {
                title: '广西'
                , id: 2
                , children: [{
                    title: '南宁'
                    , id: 2000
                }, {
                    title: '桂林'
                    , id: 2001
                }]
            }, {
                title: '陕西'
                , id: 3
                , children: [{
                    title: '西安'
                    , id: 3000
                }, {
                    title: '延安'
                    , id: 3001
                }]
            }];


        //常规用法
        tree.render({
            elem: '#treelist', //默认是点击节点可进行收缩
            data: data1,
            accordion:true,
            edit: ['del'],
            id:'lefttree_id'
        });




        table.render({
            elem: '#file_list_id'
            ,url:"https://www.layui.com/demo/table/user/?page=1&limit=30"
            ,cellMinWidth: 80 //全局定义常规单元格的最小宽度，layui 2.2.1 新增
            ,cols: [[
                {type:'checkbox'},
                {field:'id', width:80, title: 'ID', sort: true}
                ,{field:'username', width:80, title: '用户名'}
                ,{field:'sex', width:80, title: '性别', sort: true}
                ,{field:'city', width:80, title: '城市'}
                ,{field:'sign', title: '签名', width: '30%', minWidth: 100} //minWidth：局部定义当前单元格的最小宽度，layui 2.2.1 新增
                ,{field:'experience', title: '积分', sort: true}
                ,{field:'score', title: '评分', sort: true}
                ,{field:'classify', title: '职业'}
                ,{field:'wealth', width:137, title: '财富', sort: true}
                ,{fixed: 'right', title:'操作', toolbar: '#barDemo', width:150}
            ]],
            id: 'testReload'
        });//监听行工具事件
        table.on('tool(test)', function(obj){
            var data = obj.data;
            if(obj.event === 'del'){
                layer.confirm('真的删除行么', function(index){
                    obj.del();
                    layer.close(index);
                });
            } else if(obj.event === 'edit'){
                layer.prompt({
                    formType: 2
                    ,value: data.email
                }, function(value, index){
                    obj.update({
                        email: value
                    });
                    layer.close(index);
                });
            }
        });
        var $ = layui.$, active = {
            reload: function(){
                //var demoReload = $('#demoReload');

                //执行重载
                table.reload('testReload', {
                    page: {
                        curr: 1 //重新从第 1 页开始
                    }
                    ,where: {
                        key: {
                            id: demoReload.val()
                        }
                    }
                }, 'data');
            }
        };

        $('.demoTable .layui-btn').on('click', function(){
            var type = $(this).data('type');
            active[type] ? active[type].call(this) : '';
        });
    });

</script>
</body>
</html>
